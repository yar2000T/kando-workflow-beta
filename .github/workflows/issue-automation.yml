name: Auto Comment on Issues

on:
  issues:
    types:
      - opened

jobs:
  comment_on_issue:
    runs-on: ubuntu-latest

    steps:
      - name: Auto-detect issue type and comment
        uses: actions/github-script@v6
        with:
          script: |
            const issueTitle = context.payload.issue.title.toLowerCase();
            const issueBody = context.payload.issue.body ? context.payload.issue.body.toLowerCase() : "";

            // Define keywords for classification
            const featureKeywords = ["feature", "request", "enhancement", "idea"];
            const bugKeywords = ["bug", "error", "issue", "problem", "fail"];

            // Determine the type of issue
            let commentBody = "";

            if (featureKeywords.some(word => issueTitle.includes(word) || issueBody.includes(word))) {
              commentBody = `âœ¨ Thank you for suggesting a feature! ðŸš€\n\n\
Weâ€™re excited to hear your ideas for improving **Kando**! Here are a few things to keep in mind when submitting a feature request:\n\
- Please describe your idea in detail so we can better understand its value and purpose.\n\
- Let us know how this feature will improve your experience or solve a problem.\n\
- Feel free to include any examples, mockups, or use cases that can help clarify your request.\n\n\
Our team will review your request and evaluate how it aligns with our development plans. Stay tuned for updates, and thanks for contributing to the growth of Kando! ðŸŽ‰\n\n\
*(Learn more about Kando at [kando.menu](https://kando.menu))*`;
            } else if (bugKeywords.some(word => issueTitle.includes(word) || issueBody.includes(word))) {
              commentBody = `ðŸ‘‹ Hi there! Thanks for opening an issue!\n\n\
We appreciate you taking the time to report this bug. Bugs help us improve **Kando** and make it better for everyone! ðŸš€\n\n\
Here are a few tips for reporting a bug effectively:\n\
- Describe the issue clearly, including steps to reproduce it.\n\
- Mention the version of **Kando** you are using and your operating system.\n\
- Include screenshots or error logs if applicable.\n\n\
Our team will investigate the issue and update you as soon as possible. Thanks for your patience and support! ðŸ˜Š\n\n\
*(Learn more about Kando at [kando.menu](https://kando.menu))*`;
            }

            if (commentBody) {
              await github.rest.issues.createComment({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.issue.number,
                body: commentBody,
              });
              console.log(`Comment added to issue #${context.issue.number}`);
            } else {
              console.log(`No keywords matched for issue #${context.issue.number}. No comment added.`);
            }
